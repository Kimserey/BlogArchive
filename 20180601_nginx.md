# Host ASP NET Core on Ubuntu

Few weeks ago I showed how to host ASP NET Core on Windows Server behind IIS. Compared to Windows Server, Ubuntu with nginx offers a quicker way to get started and a better control over the kestrel process.
Today we will see how to host an ASP NET Core application on Ubuntu. This post will be composed of three parts:

1. Get started by uploading your application
2. Install nginx
3. Configure nginx

## 1. Get started

From your ASP.NET Core project, run the publish command
Start by publishing your project

```cmd
dotnet publish -c Release
```

## 2. Manage Kestrel process with systemd

```txt
[Unit]
Description=Expense King api

[Service]
WorkingDirectory=/usr/share/ek/api
ExecStart=/usr/bin/dotnet /usr/share/ek/api/ExpenseKing.Api.dll
SyslogIdentifier=ek-api
User=www-data

[Install]
WantedBy=multi-user.target
```

## 3. Configure nginx reverse proxy

```txt
server {
    listen 80;
    listen [::]:80;
    server_name groomgy.com www.groomgy.com;

    proxy_http_version 1.1;
    proxy_set_header Connection keep-alive;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Host $http_host;
    proxy_cache_bypass $http_upgrade;

    location / {
        proxy_pass http://localhost:4200/;
    }

    location /api/ {
        proxy_pass http://localhost:5300/;
    }

    location /identity/ {
        proxy_pass http://localhost:5000/;
    }
}
```