# Razor syntax and helpers

Razor is a html template which allows us to construct pieces of html components by combining data and html markup. The power of Razor reside in its typesafety. It allows us to directly use our C# models in the templates and call functions we had defined in our controllers. Together with intellisense, it is quick way to build simple UI.
Today we will explore some of the features from Razor:

```
 1. Syntax
 2. Templates
 3. Tag helpers
```

## 1. Syntax

Razor expressions can written in two ways, implicit or explicit notation.

For implicit notation, we start with `@` and then we directly have access to values either from the view itself or some we created in the view or static functions.

```
@{ 
    var a = 10;
}

<label>@a</label>
```

For every changes made on the view, only a refresh of the browser is required. The default behaviour is that __Razor views are compiled at runtime when the view is invoked unless configured otherwise__.

The explicit notation is used with parentheses. It is usefull for simple manipulation:

```
@{
    var a = 10;
    var b = 15;
}

<p>Total: @(a + b)</p>
```

In the previous two sample we also saw that code blocks can be placed directly into the views using `@{ ... }`. Code blocks can also be created by control structures like `@if`, `@for` and others. A list can be found in the official razor doc [https://docs.microsoft.com/en-us/aspnet/core/mvc/views/razor](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/razor).

In code blocks, we saw that C# code can be written, but we can also add HTML code in the code block.

```
@{
    var n = 1;
    for(var i = 0; i < n; i++)
    {
        <p>@i</p>
    }
}
```

This is known as an implicit code block transition where html tags are written directly within the code block.

Since code written in code block expect C#, if we want to add normal html text, the IDE will interpret it as C#.
In order to interpret it as html text we can use `<text>`, also known as explicit code block transition:

```
@{
    var personName = "Kim";
    <text>Name: @personName</text>
}
```

Lastly if we have a single line we can use the explicit line code block transition with `@:`. The previous example can be simplified to:

```
@{
    var personName = "Kim";
    @:Name: @personName
}
```

2. Templates

Layouts are placed in shared folder with _layout.cshtml

ViewStart.cshtml can be used to place code running before every view.
For example specifying the layout

@{ Layout = _layout }

Layout is a property of the view which sets the layout to be used.

To use partial views, we can use the Html property of the view which we access using @Html, and for partial we invoke the Partial function of Html @Html.Partial("view", model).
Here we specified the name as "view" which specify to Razor to search the view in current folder or shared folder.
If we would have specified "view.cshtml" it would have only searched in the current folder.

For example the following code:

Another property used is @Model which gives access to the model linked to the page. To set the type of the model we can use the special keyword @model.

3. Tag helpers

One of the latest add-on on Razor are the tag helpers. Tag helpers are HTML tags which take over certain HTML tags and provide attributes which can be filled up in a typesafe way together with intelisense help. When the tag needs to be rendered the tag helper will generate the necessary html tag, the necessary attributes and also add other html tags if required.

For example we used to have to use @Html.LabelFor to create a label for an input with a dynamic name.
Now we can use the label tag helper which contains a asp-for attribute.

For example the following form:

```
```

With the following viewmodel and data annotation:

```
```

Generates the following:

```
```

Some of the common ones are the form tag helper which has the asp-controller and asp-action add-ons, the label tag helper with asp-for and the input tag helper with asp-for and asp-validation-for.

The select tag helper is also very useful as we can display a selection list for an enumeration:

```
<select asp-for="MyEnumProp" 
            asp-items="Html.GetEnumSelectList<MyEnum>()"> >
    </select> 
```

`Html` is a property on the view which gives access to basic functionalities like `GetEnumSelectList` which transforms an enum into a selection list.
Display attribute can then be used to display a human readable string.

For form fields, a comprehensive list is available in ASP NET core documentation:

[https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms)