# Useful bash and friends commands

Since I have installed [Ubuntu as a subsystem](https://kimsereyblog.blogspot.sg/2018/03/install-dotnet-on-ubuntu-with-linux.html), I see myself using more and more bash. The reason being that all the VMs I spin up are Ubuntu VMs. My interactions with my servers are very basic but even for those, there are many beautiful commands which ease my interactions. Today I would like to go through the commands and tips which I use on a daily basis:

1. ssh
2. scp
3. aliases
4. less

## 1. ssh

### 1.1 Remote actions

The ssh command allows us to remotly access a terminal or to execute commands remotly.

For example when we create a new EC2 instance on AWS we can download the private key.
This key can be used to ssh into the vm.

```sh
ssh -i key.pem user:hostname
```

`-i` is used to indicate the identity file to use. You might need to change the permissions on the file before it can be used with `chmod 700 key.pem`.

It is also possible, to make life easier, to setup ssh to autodetect the private key file to use based on the host we are trying to access.

We can achieve that by placing the `key.pem` file under `~/.ssh` and provide the proper rights `chmod 700 ~/.ssh`.
Next create or modify the `~/.ssh/config` file to specify the identity file for this host.

```sh
Host hostname1
    IdentityFile ~/.ssh/key1.pem
Host hostname2
    IdentityFile ~/.ssh/key2.pem
```

Now we will no longer need to specify the identity file to ssh into the server.

```sh
ssh user:hostname
```

### 1.2 ssh tunneling

Another useful functionality is the tunneling `-L`. SSH allows to redirect traffic from a `L`ocal port to a particular address on the server.

This is particularly useful when an address is only accessible from the server.

```sh
ssh user:hostname -L 9500:localhost:9000
```

This command will tunnel all traffic from our port 9500 to localhost:9000 on the server.

## 2. scp

`scp` provides a remote copy functionality:

```sh
scp -r /dir user@hostname:~/
```

It runs on ssh therefore we would need to setup ssh to autodetect the identity file as described in 1.1).

## 3. Aliases

To create aliases, we need to use the `alias` command. For example if we want to create a command to ssh and scp:

```sh
alias ssh-myapp='ssh user@hostname'
alias scp-myapp='scp -r /dir user@hostname:~/'
```

But those are temporary, if we want to persist them, we can add them to `.bash_aliases`.

```sh
sudo vim ~/.bash_aliases
```

`.bash_aliases` is actually called from `.bashrc` which is the file containing the command to run (rc: run command) before the interactive bash starts. This the line which calls `.bash_aliases`:

```sh
# Alias definitions.
# You may want to put all your additions into a separate file like
# ~/.bash_aliases, instead of adding them here directly.
# See /usr/share/doc/bash-doc/examples in the bash-doc package.

if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi
```

## 4. less

Lastly when we need to watch a file, we can use `less`.

```sh
less +F /var/log/myapp/app.log
```

And that concludes today's post.

## Conclusion

Today we saw some useful commands on bash mainly targeted to interact with a Linux server, copy files and create useful aliases to make work quicker. We saw how we could configure and use `ssh` to login on a remote server, we also saw how we could use `scp` to copy files in a secured way and lastly we saw how to save `alias` to make it quicker and to not have to memorize server addresses and lastly we saw a useful `less` command to watch files. Hope you liked this post, see you next time!