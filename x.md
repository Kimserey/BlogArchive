# Bundle your resources with WebSharper in SPA

WebSharper official documentation can be found here [http://websharper.com/docs/resources](http://websharper.com/docs/resources).
But the doc focus heavily on how referencing the resources work for `Sitelets`.
So today I will explain how you can reference your own `js` and `css` file into your `SPA`.

There are three ways to reference files:

1. Reference an external a resource through url
2. Reference a resource served from your server
3. Bundle your resources in the WebSharper JS and CSS.

If we take a look at the files generated by a SPA under `\Content` we should see:
```
\Content
    |
    |-- MyApp.js
    |-- MyApp.min.js
    |-- MyApp.css
    |-- MyApp.Head.js
    |-- MyApp.Head.html
```

`MyApp.js` and `MyApp.min.js` are the JS generated from our F# code. 
`MyApp.css`, `MyApp.Head.js` and `MyApp.Head.html` contain the content extracted from our resources.
 Each of this file is loaded in the `index.html`.

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>MyApp</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="Content/MyApp.css" />
    <script type="text/javascript" src="Content/MyApp.head.js"></script>
</head>
<body>
    <script type="text/javascript" src="Content/MyApp.js"></script>
</body>
</html>
```
 
So let's see how they are generated and used.

## 1. Reference an external a resource through url

The basic of referencing resources is to use the `BaseResource` type from `WebSharper.Resources` togetgher with the `Require` attribute.

Let say we want to reference `https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css`.
That's how we would reference it:

```
open WebSharper.Resources

module Resources =
    type Bootstrap() =
        inherit BaseResource("https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css")

    [<assembly:Require(typeof<Bootstrap>)>]
    do()
```

We first open `WebSharper.Resources` and then create a type `Bootstrap` (the name doesn't matter) which inherit from `BaseResource` and give as argument the absolute url.
Then we specify that the SPA `requires` this resource by adding some code with the attribute `Require(typeof<Bootstrap>)`.

This piece of code will instruct WebSharper to add the link `<link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">` to the head of our index.html.
If we inspect `MyApp.Head.js` we should find a JS code that insert the `link` tag into the document.

__So if you need to reference an external resource, pass the absolute url to BaseResource and WebSharper will add the `link` tag for you in the head of your index.html.__

## 2. Reference a resource served from your server

For resources served by your own server, pass a relative url to `BaseResource`.

```
type MyOwnCss() =
    inherit BaseResource("css/myowncss.css")
```

The result should be the same as explained in #1.

__So if you need to reference a resource served by your own server, pass a relative url and WebSharper will add the `link` tag for you in the head of your index.html.__

### Side notes

If you have embedded resources and you want it to be copied to the `\Content` folder along with the WebSharper generated files, you must add the attribute `assembly:System.Web.UI.WebResource("file name", "mime type");`
This will tell WebSharper that you have an embedded resource and that you want it to be extracted and copied into the `\Content` folder.

## 3. Bundle embedded resources

Even though you can reference files through relative url as explained in #2, there is a better way of handling your own resource - __bundle the js and css into your app.js and app.css__.
This is really helpful if you have multiples JS files referenced and you want to bundle it all into a single JS file.
In order to do that, you must first add your JS files to your proejct and set it as `embedded resources`.
After that, create your resource types and pass to `BaseResource` the name of your files.

```
module Resources =
    type Css() =
        inherit BaseResource("myapp.css")
    type Js() =
        inherit BaseResource("myapp.js")
        
    [<assembly:Require(typeof<Css>);
      assembly:Require(typeof<Js>)>]
    do()
```

By doing that, the JS will be bundled inside your main JS `MyApp.js` and the CSS will be bundled into `MyApp.css` under the `\Content` folder.
So if you have 100 JS files, WebSharper will bundle it automatically under the same `MyApp.js`.

# Conclusion

WebSharper comes with a Bundling functionality out of the box. It is not advertise on the documentation but it is extremely usefull.
And managing dependy from a F# file is so much more appealing than having html tags cluttered in index.html.
Let me know if this helped you, if you have any question leave a comment here or hit me on Twitter [@Kimserey_Lam](https://twitter.com/Kimserey_Lam).
See you next time!
